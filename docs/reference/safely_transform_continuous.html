<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculating a transformation of continuous feature using PDP/ALE plot — safely_transform_continuous • rSAFE</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top navbar-mi2" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class = "navbar-mi2logo" href="http://DrWhy.AI/">
        <img src = "https://github.com/ModelOriented/DrWhyTemplate/blob/master/inst/pkgdown/assets/drwhy_znak_violet_small.jpg?raw=true" alt = "MI2" height = 46 title = "MI2">
	  </a>
      <a class="navbar-brand navbar-mi2" href="../index.html">Calculating a transformation of continuous feature using PDP/ALE plot</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="navbar-mi2 nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/example_apartments.html">Regression example - apartments dataset</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/MI2DataLab/SAFE">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculating a transformation of continuous feature using PDP/ALE plot</h1>
    </div>

    
    <p>The safely_transform_continuous() function calculates a transformation function
for the continuous variable using a PDP plot obtained from black box model.</p>
    

    <pre class="usage"><span class='fu'>safely_transform_continuous</span>(<span class='no'>explainer</span>, <span class='no'>variable</span>, <span class='kw'>response_type</span> <span class='kw'>=</span> <span class='st'>"ale"</span>,
  <span class='kw'>penalty</span> <span class='kw'>=</span> <span class='st'>"MBIC"</span>, <span class='kw'>no_segments</span> <span class='kw'>=</span> <span class='fl'>2</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>explainer</th>
      <td><p>DALEX explainer created with explain() function</p></td>
    </tr>
    <tr>
      <th>variable</th>
      <td><p>a feature for which the transformation function is to be computed</p></td>
    </tr>
    <tr>
      <th>response_type</th>
      <td><p>character, type of response to be calculated, one of: "pdp", "ale".
If features are uncorrelated, one can use "pdp" type - otherwise "ale" is strongly recommended.</p></td>
    </tr>
    <tr>
      <th>penalty</th>
      <td><p>penalty for introducing another changepoint,
one of "AIC", "BIC", "SIC", "MBIC", "Hannan-Quinn" or numeric non-negative value</p></td>
    </tr>
    <tr>
      <th>no_segments</th>
      <td><p>numeric, a number of segments variable is to be divided into in case of founding no breakpoints</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>list of information on the transformation of given variable</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='safe_extraction.html'>safe_extraction</a></code>, <code><a href='safely_detect_changepoints.html'>safely_detect_changepoints</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>DALEX</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>randomForest</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>rSAFE</span>)

<span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='no'>apartments</span>[<span class='fl'>1</span>:<span class='fl'>500</span>,]
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>111</span>)
<span class='no'>model_rf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/randomForest/man/randomForest.html'>randomForest</a></span>(<span class='no'>m2.price</span> ~ <span class='no'>construction.year</span> + <span class='no'>surface</span> + <span class='no'>floor</span> +
                           <span class='no'>no.rooms</span> + <span class='no'>district</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>data</span>)
<span class='no'>explainer_rf</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='no'>model_rf</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>data</span>[,<span class='fl'>2</span>:<span class='fl'>6</span>], <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>data</span>[,<span class='fl'>1</span>])
<span class='fu'>safely_transform_continuous</span>(<span class='no'>explainer_rf</span>, <span class='st'>"construction.year"</span>)</div><div class='output co'>#&gt; $sv
#&gt;                                                  _vname_      _label_     _x_
#&gt; construction.year.randomForest.1920    construction.year randomForest 1920.00
#&gt; construction.year.randomForest.1921    construction.year randomForest 1921.00
#&gt; construction.year.randomForest.1922.98 construction.year randomForest 1922.98
#&gt; construction.year.randomForest.1923.97 construction.year randomForest 1923.97
#&gt; construction.year.randomForest.1924    construction.year randomForest 1924.00
#&gt; construction.year.randomForest.1925    construction.year randomForest 1925.00
#&gt; construction.year.randomForest.1926    construction.year randomForest 1926.00
#&gt; construction.year.randomForest.1927    construction.year randomForest 1927.00
#&gt; construction.year.randomForest.1928    construction.year randomForest 1928.00
#&gt; construction.year.randomForest.1929    construction.year randomForest 1929.00
#&gt; construction.year.randomForest.1931    construction.year randomForest 1931.00
#&gt; construction.year.randomForest.1932.86 construction.year randomForest 1932.86
#&gt; construction.year.randomForest.1933.85 construction.year randomForest 1933.85
#&gt; construction.year.randomForest.1934.84 construction.year randomForest 1934.84
#&gt; construction.year.randomForest.1935    construction.year randomForest 1935.00
#&gt; construction.year.randomForest.1936    construction.year randomForest 1936.00
#&gt; construction.year.randomForest.1937    construction.year randomForest 1937.00
#&gt; construction.year.randomForest.1938    construction.year randomForest 1938.00
#&gt; construction.year.randomForest.1939    construction.year randomForest 1939.00
#&gt; construction.year.randomForest.1940    construction.year randomForest 1940.00
#&gt; construction.year.randomForest.1941    construction.year randomForest 1941.00
#&gt; construction.year.randomForest.1943    construction.year randomForest 1943.00
#&gt; construction.year.randomForest.1944    construction.year randomForest 1944.00
#&gt; construction.year.randomForest.1945    construction.year randomForest 1945.00
#&gt; construction.year.randomForest.1946    construction.year randomForest 1946.00
#&gt; construction.year.randomForest.1947    construction.year randomForest 1947.00
#&gt; construction.year.randomForest.1948    construction.year randomForest 1948.00
#&gt; construction.year.randomForest.1949    construction.year randomForest 1949.00
#&gt; construction.year.randomForest.1950    construction.year randomForest 1950.00
#&gt; construction.year.randomForest.1951    construction.year randomForest 1951.00
#&gt; construction.year.randomForest.1951.65 construction.year randomForest 1951.65
#&gt; construction.year.randomForest.1952    construction.year randomForest 1952.00
#&gt; construction.year.randomForest.1953    construction.year randomForest 1953.00
#&gt; construction.year.randomForest.1954.62 construction.year randomForest 1954.62
#&gt; construction.year.randomForest.1956    construction.year randomForest 1956.00
#&gt; construction.year.randomForest.1956.59 construction.year randomForest 1956.59
#&gt; construction.year.randomForest.1957    construction.year randomForest 1957.00
#&gt; construction.year.randomForest.1958    construction.year randomForest 1958.00
#&gt; construction.year.randomForest.1959    construction.year randomForest 1959.00
#&gt; construction.year.randomForest.1960    construction.year randomForest 1960.00
#&gt; construction.year.randomForest.1961    construction.year randomForest 1961.00
#&gt; construction.year.randomForest.1962    construction.year randomForest 1962.00
#&gt; construction.year.randomForest.1963    construction.year randomForest 1963.00
#&gt; construction.year.randomForest.1964    construction.year randomForest 1964.00
#&gt; construction.year.randomForest.1965    construction.year randomForest 1965.00
#&gt; construction.year.randomForest.1966.49 construction.year randomForest 1966.49
#&gt; construction.year.randomForest.1967    construction.year randomForest 1967.00
#&gt; construction.year.randomForest.1968    construction.year randomForest 1968.00
#&gt; construction.year.randomForest.1969    construction.year randomForest 1969.00
#&gt; construction.year.randomForest.1970    construction.year randomForest 1970.00
#&gt; construction.year.randomForest.1971    construction.year randomForest 1971.00
#&gt; construction.year.randomForest.1972    construction.year randomForest 1972.00
#&gt; construction.year.randomForest.1972.41 construction.year randomForest 1972.41
#&gt; construction.year.randomForest.1974    construction.year randomForest 1974.00
#&gt; construction.year.randomForest.1975    construction.year randomForest 1975.00
#&gt; construction.year.randomForest.1977    construction.year randomForest 1977.00
#&gt; construction.year.randomForest.1978    construction.year randomForest 1978.00
#&gt; construction.year.randomForest.1979    construction.year randomForest 1979.00
#&gt; construction.year.randomForest.1981    construction.year randomForest 1981.00
#&gt; construction.year.randomForest.1983    construction.year randomForest 1983.00
#&gt; construction.year.randomForest.1984    construction.year randomForest 1984.00
#&gt; construction.year.randomForest.1985    construction.year randomForest 1985.00
#&gt; construction.year.randomForest.1985.29 construction.year randomForest 1985.29
#&gt; construction.year.randomForest.1986    construction.year randomForest 1986.00
#&gt; construction.year.randomForest.1987    construction.year randomForest 1987.00
#&gt; construction.year.randomForest.1988    construction.year randomForest 1988.00
#&gt; construction.year.randomForest.1989    construction.year randomForest 1989.00
#&gt; construction.year.randomForest.1989.24 construction.year randomForest 1989.24
#&gt; construction.year.randomForest.1990    construction.year randomForest 1990.00
#&gt; construction.year.randomForest.1991    construction.year randomForest 1991.00
#&gt; construction.year.randomForest.1992    construction.year randomForest 1992.00
#&gt; construction.year.randomForest.1993    construction.year randomForest 1993.00
#&gt; construction.year.randomForest.1994    construction.year randomForest 1994.00
#&gt; construction.year.randomForest.1995    construction.year randomForest 1995.00
#&gt; construction.year.randomForest.1996    construction.year randomForest 1996.00
#&gt; construction.year.randomForest.1997    construction.year randomForest 1997.00
#&gt; construction.year.randomForest.1998    construction.year randomForest 1998.00
#&gt; construction.year.randomForest.1999    construction.year randomForest 1999.00
#&gt; construction.year.randomForest.2000.09 construction.year randomForest 2000.09
#&gt; construction.year.randomForest.2001.08 construction.year randomForest 2001.08
#&gt; construction.year.randomForest.2003    construction.year randomForest 2003.00
#&gt; construction.year.randomForest.2004    construction.year randomForest 2004.00
#&gt; construction.year.randomForest.2004.05 construction.year randomForest 2004.05
#&gt; construction.year.randomForest.2005    construction.year randomForest 2005.00
#&gt; construction.year.randomForest.2006    construction.year randomForest 2006.00
#&gt; construction.year.randomForest.2007    construction.year randomForest 2007.00
#&gt; construction.year.randomForest.2009    construction.year randomForest 2009.00
#&gt; construction.year.randomForest.2010    construction.year randomForest 2010.00
#&gt;                                              _yhat_ _ids_
#&gt; construction.year.randomForest.1920       0.0000000     0
#&gt; construction.year.randomForest.1921      -0.4788188     0
#&gt; construction.year.randomForest.1922.98   31.9705418     0
#&gt; construction.year.randomForest.1923.97   28.1298350     0
#&gt; construction.year.randomForest.1924      28.1298350     0
#&gt; construction.year.randomForest.1925       5.3191752     0
#&gt; construction.year.randomForest.1926      10.9890902     0
#&gt; construction.year.randomForest.1927     -29.6124966     0
#&gt; construction.year.randomForest.1928     -35.2704262     0
#&gt; construction.year.randomForest.1929     -45.6703374     0
#&gt; construction.year.randomForest.1931     -64.0997371     0
#&gt; construction.year.randomForest.1932.86  -89.4061538     0
#&gt; construction.year.randomForest.1933.85 -130.6336331     0
#&gt; construction.year.randomForest.1934.84 -217.6023312     0
#&gt; construction.year.randomForest.1935    -217.6023312     0
#&gt; construction.year.randomForest.1936    -261.3474181     0
#&gt; construction.year.randomForest.1937    -266.3732517     0
#&gt; construction.year.randomForest.1938    -284.6784415     0
#&gt; construction.year.randomForest.1939    -296.4874672     0
#&gt; construction.year.randomForest.1940    -313.9788498     0
#&gt; construction.year.randomForest.1941    -314.6985854     0
#&gt; construction.year.randomForest.1943    -318.6016248     0
#&gt; construction.year.randomForest.1944    -326.0885464     0
#&gt; construction.year.randomForest.1945    -337.9547047     0
#&gt; construction.year.randomForest.1946    -342.3743194     0
#&gt; construction.year.randomForest.1947    -342.2695960     0
#&gt; construction.year.randomForest.1948    -348.1902896     0
#&gt; construction.year.randomForest.1949    -356.3818556     0
#&gt; construction.year.randomForest.1950    -366.8717414     0
#&gt; construction.year.randomForest.1951    -375.7986459     0
#&gt; construction.year.randomForest.1951.65 -373.5101570     0
#&gt; construction.year.randomForest.1952    -373.5101570     0
#&gt; construction.year.randomForest.1953    -373.4665106     0
#&gt; construction.year.randomForest.1954.62 -380.7125276     0
#&gt; construction.year.randomForest.1956    -382.1265747     0
#&gt; construction.year.randomForest.1956.59 -385.7418306     0
#&gt; construction.year.randomForest.1957    -385.7418306     0
#&gt; construction.year.randomForest.1958    -379.1217924     0
#&gt; construction.year.randomForest.1959    -377.7544264     0
#&gt; construction.year.randomForest.1960    -373.3014901     0
#&gt; construction.year.randomForest.1961    -372.6085633     0
#&gt; construction.year.randomForest.1962    -366.6955434     0
#&gt; construction.year.randomForest.1963    -374.0320541     0
#&gt; construction.year.randomForest.1964    -379.3692214     0
#&gt; construction.year.randomForest.1965    -380.0888870     0
#&gt; construction.year.randomForest.1966.49 -382.3729279     0
#&gt; construction.year.randomForest.1967    -383.2203973     0
#&gt; construction.year.randomForest.1968    -383.3451798     0
#&gt; construction.year.randomForest.1969    -379.5993249     0
#&gt; construction.year.randomForest.1970    -379.8155130     0
#&gt; construction.year.randomForest.1971    -383.7430673     0
#&gt; construction.year.randomForest.1972    -382.7366701     0
#&gt; construction.year.randomForest.1972.41 -381.6203356     0
#&gt; construction.year.randomForest.1974    -384.3715931     0
#&gt; construction.year.randomForest.1975    -386.7851269     0
#&gt; construction.year.randomForest.1977    -391.4363263     0
#&gt; construction.year.randomForest.1978    -391.4449263     0
#&gt; construction.year.randomForest.1979    -391.3231987     0
#&gt; construction.year.randomForest.1981    -387.4808022     0
#&gt; construction.year.randomForest.1983    -384.5683908     0
#&gt; construction.year.randomForest.1984    -382.8556177     0
#&gt; construction.year.randomForest.1985    -380.7721432     0
#&gt; construction.year.randomForest.1985.29 -380.6415431     0
#&gt; construction.year.randomForest.1986    -378.9190937     0
#&gt; construction.year.randomForest.1987    -378.4847953     0
#&gt; construction.year.randomForest.1988    -374.6461611     0
#&gt; construction.year.randomForest.1989    -363.0140084     0
#&gt; construction.year.randomForest.1989.24 -362.2166126     0
#&gt; construction.year.randomForest.1990    -358.1841977     0
#&gt; construction.year.randomForest.1991    -358.8721647     0
#&gt; construction.year.randomForest.1992    -359.8441862     0
#&gt; construction.year.randomForest.1993    -350.1526964     0
#&gt; construction.year.randomForest.1994    -333.4070579     0
#&gt; construction.year.randomForest.1995    -102.5121057     0
#&gt; construction.year.randomForest.1996     -92.6443548     0
#&gt; construction.year.randomForest.1997     -91.6661631     0
#&gt; construction.year.randomForest.1998     -95.5823185     0
#&gt; construction.year.randomForest.1999     -87.7907008     0
#&gt; construction.year.randomForest.2000.09  -79.9025269     0
#&gt; construction.year.randomForest.2001.08  -82.2630218     0
#&gt; construction.year.randomForest.2003     -76.6647112     0
#&gt; construction.year.randomForest.2004     -55.5155618     0
#&gt; construction.year.randomForest.2004.05  -49.6940335     0
#&gt; construction.year.randomForest.2005     -47.6365146     0
#&gt; construction.year.randomForest.2006     -37.8860250     0
#&gt; construction.year.randomForest.2007     -34.3066721     0
#&gt; construction.year.randomForest.2009     -39.3150611     0
#&gt; construction.year.randomForest.2010     -36.0281145     0
#&gt; 
#&gt; $break_points
#&gt; [1] 1929 1950 1974 1984 1994
#&gt; 
#&gt; $new_levels
#&gt; [1] "(-Inf, 1929]" "(1929, 1950]" "(1950, 1974]" "(1974, 1984]" "(1984, 1994]"
#&gt; [6] "(1994, Inf)" 
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Anna Gierlak, Przemyslaw Biecek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

